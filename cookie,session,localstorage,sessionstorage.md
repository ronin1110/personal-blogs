# cookie,session,localstorage,sessionstorage

## cookie和session:

理论上来说；同一用户的所有请求都属于一个会话，另一个用户的请求又属于另一个会话，所以我们需要区分不同的会话，但是http协议一个特点就是无状态，多次连接之间式独立的，所以需要用到**cookie和session技术**



**cookie的工作原理**：服务器需要区分连接是属于哪个会话，就向客户发送一个cookie，客户在请求的时候，把这个cookie带上，服务器就从这个cookie知道连接的所属，也就是cookie的存在就如同一个通过证的作用，证明自己的身份，cookie一般4K



**cookie具有不可跨域名性**

就是在www.baidu.com下的cookie，不能用于www.google.com



**Session是服务器端使用的一种记录客户端状态的机制**，

使用上比Cookie简单一些，相应的也**增加了服务器的存储压力**。与cookie不同的是，session吧客户信息存在了服务器端，而cookie是客户端自己携带通行证，session把大家的名单都集中到了一起（客户档案SessionID），那个客户过来，通过SessionID去查对应的名单就可以

### 对比：

cookie数据保存在客户端，session数据保存在服务器端。

都是同源的（同域名都可访问）





## localstorage和sessionstorage



### sessionstorage：

仅在当前浏览器窗口关闭前有效，自然也就不可能持久保持。



### localstorage：

长久有效；html5时提出，



| 特性           | Cookie                                                       | localStorage                                                | sessionStorage                               |
| :------------- | :----------------------------------------------------------- | :---------------------------------------------------------- | :------------------------------------------- |
| 数据的生命期   | 一般由服务器生成，可设置失效时间。如果在浏览器端生成Cookie，默认是关闭浏览器后失效 | 除非被清除，否则永久保存                                    | 仅在当前会话下有效，关闭页面或浏览器后被清除 |
| 存放数据大小   | 4K左右                                                       | 一般为5MB                                                   |                                              |
| 与服务器端通信 | 每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题 | 仅在客户端（即浏览器）中保存，不参与和服务器的通信          |                                              |
| 易用性         | 需要程序员自己封装，源生的Cookie接口不友好                   | 源生接口可以接受，亦可再次封装来对Object和Array有更好的支持 |                                              |